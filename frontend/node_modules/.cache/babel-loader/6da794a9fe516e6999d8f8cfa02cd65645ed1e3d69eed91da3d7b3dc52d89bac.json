{"ast":null,"code":"import axios from \"axios\";\nexport const LOGIN_USER_KEY = \"HIVE_TECHWEAR_LOGIN_USER_KEY\";\nconst {\n  REACT_APP_ENVIRONMENT,\n  REACT_APP_API_BASE_URL_PROD,\n  REACT_APP_API_BASE_URL_DEV\n} = process.env;\nlet baseURL;\nbaseURL = \"http://127.0.0.1:8000/\";\nconst api = axios.create({\n  baseURL: baseURL,\n  headers: {\n    \"Content-Type\": \"application/json\"\n  }\n});\napi.interceptors.request.use(config => {\n  if (config.requireToken) {\n    const user = localStorage.getItem(LOGIN_USER_KEY) ? JSON.parse(localStorage.getItem(LOGIN_USER_KEY)) : null;\n    if (user && user.token) {\n      config.headers[\"Authorization\"] = user.token;\n    }\n  }\n  return config;\n}, err => {\n  console.error(err);\n  return Promise.reject(err);\n});\napi.interceptors.response.use(response => {\n  return response.data;\n}, error => {\n  console.log(\"error.response\", error.response);\n  if (error.response && error.response.status === 401) {\n    localStorage.removeItem(LOGIN_USER_KEY);\n  }\n  return Promise.reject(error);\n});\nexport default class API {\n  constructor() {\n    this.signUp = async signUpBody => {\n      const formData = new FormData();\n      for (const key in signUpBody) {\n        formData.append(key, signUpBody[key]);\n      }\n      return api.post(\"/users/signup/\", formData);\n    };\n    this.signIn = async signInBody => {\n      const formData = new FormData();\n      for (const key in signInBody) {\n        formData.append(key, signInBody[key]);\n      }\n      return api.post(\"/users/signin/\", formData);\n    };\n    // Category\n    this.getCategories = () => {\n      return api.get(\"/categories/\");\n    };\n    // Product\n    this.getProducts = (query = {}) => {\n      return api.get(\"/products/\", {\n        params: query,\n        requireToken: true\n      });\n    };\n    // Cart\n    this.getCarts = (query = {}) => {\n      return api.get(\"/carts/\", {\n        params: query,\n        requireToken: true\n      });\n    };\n    this.addCart = addCartBody => {\n      const formData = new FormData();\n      for (const key in addCartBody) {\n        formData.append(key, addCartBody[key]);\n      }\n      return api.post(\"/carts/add/\", formData, {\n        requireToken: true\n      });\n    };\n    this.updateCart = (updateCartBody, cartId) => {\n      const formData = new FormData();\n      for (const key in updateCartBody) {\n        formData.append(key, updateCartBody[key]);\n      }\n      return api.put(`/carts/update/${cartId}/`, formData, {\n        requireToken: true\n      });\n    };\n    // Checkout\n    this.checkoutOrder = checkoutOrderBody => {\n      return api.post(\"/orders/add/\", checkoutOrderBody, {\n        requireToken: true\n      });\n    };\n  }\n}","map":{"version":3,"names":["axios","LOGIN_USER_KEY","REACT_APP_ENVIRONMENT","REACT_APP_API_BASE_URL_PROD","REACT_APP_API_BASE_URL_DEV","process","env","baseURL","api","create","headers","interceptors","request","use","config","requireToken","user","localStorage","getItem","JSON","parse","token","err","console","error","Promise","reject","response","data","log","status","removeItem","API","constructor","signUp","signUpBody","formData","FormData","key","append","post","signIn","signInBody","getCategories","get","getProducts","query","params","getCarts","addCart","addCartBody","updateCart","updateCartBody","cartId","put","checkoutOrder","checkoutOrderBody"],"sources":["D:/hivetechwear/frontend/src/API.js"],"sourcesContent":["import axios from \"axios\";\r\n\r\nexport const LOGIN_USER_KEY = \"HIVE_TECHWEAR_LOGIN_USER_KEY\";\r\nconst { REACT_APP_ENVIRONMENT, REACT_APP_API_BASE_URL_PROD, REACT_APP_API_BASE_URL_DEV } = process.env;\r\nlet baseURL;\r\n\r\nbaseURL = \"http://127.0.0.1:8000/\";\r\nconst api = axios.create({\r\n  baseURL: baseURL,\r\n  headers: {\r\n    \"Content-Type\": \"application/json\",\r\n  },\r\n});\r\n\r\napi.interceptors.request.use(\r\n  (config) => {\r\n    if (config.requireToken) {\r\n      const user = localStorage.getItem(LOGIN_USER_KEY)\r\n        ? JSON.parse(localStorage.getItem(LOGIN_USER_KEY))\r\n        : null;\r\n      if (user && user.token) {\r\n        config.headers[\"Authorization\"] = user.token;\r\n      }\r\n    }\r\n    return config;\r\n  },\r\n  (err) => {\r\n    console.error(err);\r\n    return Promise.reject(err);\r\n  }\r\n);\r\n\r\napi.interceptors.response.use(\r\n  (response) => {\r\n    return response.data;\r\n  },\r\n  (error) => {\r\n    console.log(\"error.response\", error.response);\r\n    if (error.response && error.response.status === 401) {\r\n      localStorage.removeItem(LOGIN_USER_KEY);\r\n    }\r\n    return Promise.reject(error);\r\n  }\r\n);\r\n\r\nexport default class API {\r\n  signUp = async (signUpBody) => {\r\n    const formData = new FormData();\r\n    for (const key in signUpBody) {\r\n      formData.append(key, signUpBody[key]);\r\n    }\r\n    return api.post(\"/users/signup/\", formData);\r\n  };\r\n\r\n  signIn = async (signInBody) => {\r\n    const formData = new FormData();\r\n    for (const key in signInBody) {\r\n      formData.append(key, signInBody[key]);\r\n    }\r\n    return api.post(\"/users/signin/\", formData);\r\n  };\r\n\r\n  // Category\r\n  getCategories = () => {\r\n    return api.get(\"/categories/\");\r\n  };\r\n\r\n  // Product\r\n  getProducts = (query = {}) => {\r\n    return api.get(\"/products/\", { params: query, requireToken: true });\r\n  };\r\n\r\n  // Cart\r\n  getCarts = (query = {}) => {\r\n    return api.get(\"/carts/\", { params: query, requireToken: true });\r\n  };\r\n\r\n  addCart = (addCartBody) => {\r\n    const formData = new FormData();\r\n    for (const key in addCartBody) {\r\n      formData.append(key, addCartBody[key]);\r\n    }\r\n    return api.post(\"/carts/add/\", formData, { requireToken: true });\r\n  };\r\n\r\n  updateCart = (updateCartBody, cartId) => {\r\n    const formData = new FormData();\r\n    for (const key in updateCartBody) {\r\n      formData.append(key, updateCartBody[key]);\r\n    }\r\n    return api.put(`/carts/update/${cartId}/`, formData, {\r\n      requireToken: true,\r\n    });\r\n  };\r\n\r\n  // Checkout\r\n  checkoutOrder = (checkoutOrderBody) => {\r\n    return api.post(\"/orders/add/\", checkoutOrderBody, { requireToken: true });\r\n  };\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}